/*!
 * Website global methods | (c) United Agency 2014 | author: Jabran Rafique
 */
var __ua=window.__ua||{};__ua={animate:!0,init:function(){this.minHeightToSticky=this.homeDiv.height(),this.clientsDivStart=this.minHeightToSticky,this.workDivStart=this.clientsDivStart+this.clientsDivStart,this.servicesDivStart=this.workDivStart+this.workDiv.height(),this.contactDivStart=this.servicesDivStart+this.servicesDiv.height(),this.workDiv.swipeleft(this.enableCarouselSwipe),this.workDiv.swiperight(this.enableCarouselSwipe),this.textToTweet(),this.keepNavigationVisible(),$(window).resize(this.updateCoordsOnResize),window.setTimeout(function(){$(".animated.fadeInUp").removeClass("animated fadeInUp")},1e3),$.getJSON("https://api.instagram.com/v1/users/396527045/media/recent/?count=9&client_id=f4bce47624494cc79f65e13480af7058&callback=?",this.setUpInstagram),$.getJSON("http://united-agency.co.uk/lib/fetch-tweets.php",this.setUpTwitter)},updateCoordsOnResize:function(){__ua.minHeightToSticky=__ua.homeDiv.height(),__ua.clientsDivStart=__ua.minHeightToSticky,__ua.workDivStart=__ua.clientsDivStart+__ua.clientsDivStart,__ua.servicesDivStart=__ua.workDivStart+__ua.workDiv.height(),__ua.contactDivStart=__ua.servicesDivStart+__ua.servicesDiv.height()},textToTweet:function(){"undefined"==typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(item){for(var i=0;i<this.length;i++)return this[i]===item?i:-1}),String.prototype.setMentions=function(){var re=/@[A-Z0-9_]+/gi;return this.replace(re,function(match){return'<a href="https://twitter.com/'+match+'" target="_blank">'+match+"</a>"})},String.prototype.setHash=function(){var re=/#[A-Z0-9_]+/gi;return this.replace(re,function(match){return'<a href="https://twitter.com/search?q='+encodeURIComponent(match)+'" target="_blank">'+match+"</a>"})},String.prototype.setUrl=function(){var re=/(((f|ht){1}(tp|tps):\/\/)[-a-zA-Z0-9@:%_\+\.~#?&\/\/=]+)/gi;return this.replace(re,function(match){return'<a href="'+match+'" target="_blank" class="link">'+match+"</a>"})},String.prototype.toTweet=function(){var that;return that=this.setUrl(),that=that.setMentions(),that=that.setHash()}},keepNavigationVisible:function(){var clientsContent=$("#clients .container").addClass("animated fadeOut"),servicesContent=$("#services .ua-section-parent-row").addClass("animated fadeOut"),contactContent=$("#contact .container").addClass("animated fadeOut");$(window).scroll(function(){var st=$(window).scrollTop(),masthead=$(".ua-masthead");st>=__ua.minHeightToSticky-55?masthead.addClass("sticky"):masthead.removeClass("sticky"),__ua.animate&&(st>=__ua.clientsDivStart-150&&clientsContent.hasClass("fadeOut")&&clientsContent.removeClass("fadeOut").addClass("fadeInUp"),st>=__ua.servicesDivStart-150&&servicesContent.hasClass("fadeOut")&&servicesContent.removeClass("fadeOut").addClass("fadeInUp"),st>=__ua.contactDivStart-150&&contactContent.hasClass("fadeOut")&&(contactContent.removeClass("fadeOut").addClass("fadeInUp"),__ua.animate=!1))})},toggleMobileNav:function(e){e.preventDefault();var $this=$(this);$this.hasClass("inactive-nav")?$this.hide(100,"linear",function(){$(".active-nav, .nav-mobile-items").toggle(100,"linear")}):$this.hide(100,"linear",function(){$(".inactive-nav, .nav-mobile-items").toggle(100,"linear")})},navigateUser:function(e){e.preventDefault();var $this=$(this),$href=$this.data("target")?$this.data("target"):$this.attr("href"),$goto=$($href).offset().top;$this.hasClass("nav-mobile")&&$(".active-nav").hide(200,"linear",function(){$(".inactive-nav, .nav-mobile-items").toggle(200,"linear")}),$("html, body").animate({scrollTop:$goto-45})},enableCarouselSwipe:function(e){var $this=$(this);return"swipeleft"===e.type?$this.carousel("next"):"swiperight"===e.type?$this.carousel("prev"):!1},setUpInstagram:function(data){var instagramFeed=$(".ua-instagram-feed");if(data&&data.data){var ul=$("<ul />",{"class":"list-unstyled list-inline"}).appendTo(instagramFeed);for(var i in data.data)var li=$("<li />").appendTo(ul),hyperlink=$("<a />",{href:data.data[i].link,target:"_blank"}).appendTo(li),img=$("<img />",{src:data.data[i].images.thumbnail.url,alt:"",width:"75",height:"75"}).prependTo(hyperlink)}else instagramFeed.html("No instagram pictures.")},setUpTwitter:function(data){var twitterFeed=$(".ua-twitter-feed");if(data){var ul=$("<ul />",{"class":"list-unstyled"}).appendTo(twitterFeed);for(var i in data)var li=$("<li />",{id:data[i].id_str,html:data[i].text.toTweet()}).appendTo(ul),p=$("<p />",{html:'<a href="https://twitter.com/theunitedagency" target="_blank">@theunitedagency</a> &ndash; '+new Date(data[i].created_at).toDateString()}).prependTo(li)}else twitterFeed.html("No tweets.")}},$(document).ready(function(){__ua.inactiveNav=$(".inactive-nav").on("click",__ua.toggleMobileNav),__ua.activeNav=$(".active-nav").on("click",__ua.toggleMobileNav),__ua.homeDiv=$("#home"),__ua.clientsDiv=$("#clients"),__ua.servicesDiv=$("#services"),__ua.workDiv=$("#work"),__ua.contactDiv=$("#contact"),__ua.carousel=$(".carousel").carousel(),__ua.navItem=$(".nav-item, .clients").on("click",__ua.navigateUser),__ua.workPopup=$(".ua-popup").magnificPopup({type:"iframe",alignCenter:!0,overflowY:"scroll"}),__ua.init()});