/*! Global JavaScript file | United Agency | jabran@united-agency.co.uk */
function keepNavigationVisible(){$(window).scroll(function(){var st=$(window).scrollTop(),masthead=$(".ua-masthead");st>=__ua.minHeightToSticky-55?masthead.addClass("sticky"):masthead.removeClass("sticky")})}function toggleMobileNav(e){e.preventDefault();var $this=$(this);$this.hasClass("inactive-nav")?$this.hide(100,"linear",function(){$(".active-nav, .nav-mobile-items").toggle(100,"linear")}):$this.hide(100,"linear",function(){$(".inactive-nav, .nav-mobile-items").toggle(100,"linear")})}function navigateUser(e){e.preventDefault();var $this=$(this),$href=$this.data("target")?$this.data("target"):$this.attr("href"),$goto=$($href).offset().top;$this.hasClass("nav-mobile")&&$(".active-nav").hide(200,"linear",function(){$(".inactive-nav, .nav-mobile-items").toggle(200,"linear")}),$("html, body").animate({scrollTop:$goto-45})}function enableCarouselSwipe(event){var $this=$(this);return"swipeleft"===event.type?$this.carousel("next"):"swiperight"===event.type?$this.carousel("prev"):!1}function setUpInstagram(data){var instagramFeed=$(".ua-instagram-feed");if(data&&data.data){var ul=$("<ul />",{"class":"list-unstyled list-inline"}).appendTo(instagramFeed);for(var i in data.data)var li=$("<li />").appendTo(ul),hyperlink=$("<a />",{href:data.data[i].link,target:"_blank"}).appendTo(li),img=$("<img />",{src:data.data[i].images.thumbnail.url,alt:"",width:"75",height:"75"}).prependTo(hyperlink)}else instagramFeed.html("No instagram pictures.")}function setUpTwitter(data){console.log(data);var twitterFeed=$(".ua-twitter-feed");if(data){var ul=$("<ul />",{"class":"list-unstyled"}).appendTo(twitterFeed);for(var i in data)var li=$("<li />",{id:data[i].id_str,html:data[i].text.toTweet()}).appendTo(ul),p=$("<p />",{html:'<a href="https://twitter.com/theunitedagency" target="_blank">@theunitedagency</a> &ndash; '+new Date(data[i].created_at).toDateString()}).prependTo(li)}else twitterFeed.html("No tweets.")}var __ua=window.__ua||{};"undefined"==typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(item){for(var i=0;i<this.length;i++)return this[i]===item?i:-1}),String.prototype.setMentions=function(){var re=/@[A-Z0-9_]+/gi;return this.replace(re,function(match){return'<a href="https://twitter.com/'+match+'" target="_blank">'+match+"</a>"})},String.prototype.setHash=function(){var re=/#[A-Z0-9_]+/gi;return this.replace(re,function(match){return'<a href="https://twitter.com/search?q='+encodeURIComponent(match)+'" target="_blank">'+match+"</a>"})},String.prototype.setUrl=function(){var re=/(((f|ht){1}(tp|tps):\/\/)[-a-zA-Z0-9@:%_\+\.~#?&\/\/=]+)/gi;return this.replace(re,function(match){return'<a href="'+match+'" target="_blank" class="link">'+match+"</a>"})},String.prototype.toTweet=function(){var that;return that=this.setUrl(),that=that.setMentions(),that=that.setHash()},$(document).ready(function(){{var homeDiv=($(".inactive-nav").on("click",toggleMobileNav),$(".active-nav").on("click",toggleMobileNav),$("#home")),workDiv=($("#clients"),$("#services"),$("#work"));$("#contact"),$(".carousel").carousel(),$(".nav-item, .clients").on("click",navigateUser),$(".ua-popup").magnificPopup({type:"iframe",alignCenter:!0,overflowY:"scroll"})}__ua.minHeightToSticky=homeDiv.height(),$(window).resize(function(){__ua.minHeightToSticky=homeDiv.height()}),keepNavigationVisible(),workDiv.swipeleft(enableCarouselSwipe),workDiv.swiperight(enableCarouselSwipe),$.getJSON("https://api.instagram.com/v1/users/396527045/media/recent/?count=9&client_id=730838f6f74c4c789a4bebe9c82a8c2d&callback=?",setUpInstagram),$.getJSON("http://united-agency.co.uk/site/lib/fetch-tweets.php",setUpTwitter)});